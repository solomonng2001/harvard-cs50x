# Final Project: Hawker Culture

[<img src="[https://i.ytimg.com/vi/Hc79sDi3f0U/maxresdefault.jpg](https://i9.ytimg.com/vi/HGdnFw2DdqU/mq1.jpg?sqp=CPymrZcG&rs=AOn4CLDYRYlxieXHXqoBPC8EamIDQEOuyg)" width="50%">](https://youtu.be/HGdnFw2DdqU)
#### Video Demo:  <https://youtu.be/HGdnFw2DdqU>
#### Description: A hawker food blogging website for Singaporeans

## HTML Templates & Routes in hawkerculture.py

### layout.html
This page contains a navigator bar, flash messages bar to alert users, a main block that links to a child html template,
and a footer that redirects users to a UNSECO page should they want to learn more about hawker culture.

### index.html & "/" Route
This default page will extract the latest posts from hawkerculture.db and pass the latest 20 posts to index.html

### "/search" Route & index.html
The search bar is located in layout.html, within the navigator bar. When search is submited via POST, it is directed to the "/search" route
in hawkerculture.py, which will extract similar matching posts and pass them to index.html to be displayed. Should there be no matching searches,
a flash message will be generated to alert the user. When input for search bar is empty, search is submitted via GET, which the "/search" route
will redirect back to the "/" route.

### "/my_blog" Route & my_blog.html
This route will extract all posts from hawkerculture.db and display them on my_blog.html, starting from the latest post and descending in
chronological order.

#### Google Maps API
Use of google embed maps API to display the location of stall for easier visual reference. Maps is expandable for more details like directions.
If address is invalid, address input that was posted would still be displayed under the post title, but google maps will display general location
of the Singapore as default location.

#### Carousel Gallery
Carousel gallery allows user to browse through various photos. Autoflipping has been disabled for better user experience.

#### Collapsable Review and Google Maps Segment
As modern users tend to glance at photos to determine if they are interested in reading content, this segment has been made collapsable for a
more efficient user experience for users who want to filter out too much information.

#### Accessing photos from photos folder
Jinja is used to extract out the filename from the databse hawkerculture.db's list of filenames, before looping through Jinja's list of filenames
to access each photo file from the photos folder. As the general photos url is obtained from the global variable "UPLOAD_FOLDER" in
hawkerculture.py, the photos folder url can be edited and moved but will still not affect the HTML page in retrieving photos.

### "/publish" Route & publish.html
If form was submitted via POST, this route remember's user's input (except for photos) and error checks input fields as well as photos, before
logging the data into hawkerculture.db's posts table. If new posts is successfully published, user is redirected to "/myblog" route, displaying
user's blog posts. If form has errors, user is directed back to publish.html, with the remembered inputs saved onto the page for user to
edit upon his inputs. If form was requested via GET, publish.html is displayed, but with empty input values.

#### Tags
Tags are stored as raw unedited strings in posts table in hawkerculture.db. When displaying tags, the raw tag is trimed to remove all whitespaces
and split according to hashtags.

#### Uploading of photos
Photos are save in "/static/photos" and saved in the format "post1_photo0", where "post1" is the default id given to the post in the database
hawkerculture.db and "photo0" is the numbering generated by hawkerculture.py. In hawkerculture.db, the photos are remembered in a list of photo
filenames, and the url for the photos folder is a global variable in hawkerculture.py under "UPLOAD_FOLDER". Before uploading, the photos are
checked to determine if their file extentions them to be compatible image files and whether the image files uploaded in totem have exceeded
the maximum upload capacity of 16MB as defined under "app.config['MAX_CONTENT_LENGTH']".

### "/login" Route & login.html
Session is cleared first, in case there was a prior user. Login inputs are error checked in case they are empty, or do not tally with databse.
If no errors, user's id is remembered by session, which is stored in the os, and user is then redirected to "/". If username is wrong or
login.html page was obtained via GET, then login.html is displayed.

### "/create_account" Route & create_account.html
If form submitted via POST, inputs are error checked, in case they are empty, username has already been taken or passwords do not match. If no
errors detected, new user data is logged in the users table in hawkerculture.db, and user is then redirected to "/" route. If form has errors
or requested via GET, then create_account.html is displayed, together with flash messages to alert user of errors.

### "/logout" Route
User's session is forgotten and user is redirected to "/" route.
